function addToStorage(a,b,c){var d=a||"localStorage",b=PREFIX+"."+b;typeof c=="undefined"&&(c=null);if(Array.isArray(c)||c===Object(c))c=JSON.stringify(c);return window[d].setItem(b,c),!0}function getFromStorage(a,b){var c=a||"localStorage",b=PREFIX+"."+b,d;return d=window[c].getItem(b)||null,!d||d==="null"?null:d.charAt(0)==="{"||d.charAt(0)==="["?JSON.parse(d):d}function removeFromStorage(a,b){var c=a||"localStorage",b=PREFIX+"."+b;return window[c].removeItem(b),!0}function parseOptions(a){var b="";for(var c in a)typeof a[c]=="string"&&a[c].match(" ")&&(a[c]='"'+a[c]+'"'),b+=c+"="+a[c]+" ";return b}function sendBeacon(a){var b="https://familysearch.org/beacon/log";a=encodeURIComponent(a);var c=["m="+a],d=new Image;d.src=b+"?"+c.join("&"),d.onerror=function(){}}String.prototype.format=function(){var a=this,b=function(a,b,c){return a.replace(new RegExp("\\{"+b+"\\}","gm"),c)},c=function(d,e){for(var f in d)typeof d[f]=="object"?c(d[f],e+f+"."):a=b(a,e+f,d[f])};if(arguments.length>0&&typeof arguments[0]=="object")c(arguments[0],"");else{var d=arguments.length,b=function(a,b,c){return a.replace(new RegExp("\\{"+b+"\\}","gm"),c)};while(d--)a=b(a,d,arguments[d])}return a},typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Date.now||(Date.now=function(){return(new Date).getTime()}),typeof FS=="undefined"&&(FS={}),FS.URL={},FS.URL.parseParams=function(a){var b=FS.URL.parseURL(a),c=b.search,d={};c=c.substring(1,c.length);if(c.length===0)return{};var c=c.split("&");for(var e=0;e<c.length;e++){var f=c[e].split("=",2);f.length==1?d[f[0]]=!0:f.length==2&&(d[f[0]]=decodeURIComponent(f[1]))}return d},FS.URL.parseURL=function(a){var b=document.createElement("a");return b.href=a,b.href.length>0&&b.href[b.href.length-1]==="&"&&(b.href=b.href.slice(0,-1)),b},FS.URL.toQueryString=function(a){var b=[];for(var c in a||{})b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.length===0?"":b.join("&")},FS.URL.setParams=function(a,b){var c=FS.URL.parseURL(a),d=c.search,e=FS.URL.toQueryString(b);return e.length===0?(c.search="",c.href=c.href.replace("?",""),c.href):(c.search=e,c.href)},FS.URL.appendParams=function(a,b){var c=FS.URL.parseURL(a),d=c.search,e=FS.URL.toQueryString(b);return e.length===0?a:(d.length!==0?(c.search[c.search.length-1]==="&"&&(c.search=c.search.slice(0,-1)),c.search+="&"+e):c.search=e,c.href)},FS.URL.removeParams=function(a,b){if(b.length===0)return a;var c=FS.URL.parseURL(a),d=FS.URL.parseParams(a),e;for(var f=0;f<b.length;f++)delete d[b[f]];return e=FS.URL.toQueryString(d),c.search=e,c.search===""&&(c.href=c.href.replace("?","")),c.href},$.extend(typeof FS=="object"?FS:window.FS={},{_htmlDecodeDiv:document.createElement("div"),htmlEncode:function(a,b){var c="";return a&&(c=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\xA0/g,"&nbsp;"),b&&(c=c.replace(/\r{0,1}\n/g,"<br/>"),b==="all"&&(c=c.replace(/\t/g,'<span style="display:inline-block;width:3em;"/>')))),c},htmlDecode:function(a,b){var c="";return a&&($.browser.msie&&$.browser.version<"9"?(b?FS._htmlDecodeDiv.innerHTML=a.replace(/\t|\r{0,1}\n/g,"").replace(/&nbsp;/gi,"").replace(/&apos;/gi,"'").replace(/&#39;/g,"'").replace(/<span style="display\:inline\-block\;width\:3em\;"\/>/g,""):FS._htmlDecodeDiv.innerHTML=a.replace(/\t/g,"").replace(/&nbsp;/gi,"").replace(/&apos;/gi,"'").replace(/&#39;/g,"'").replace(/\r{0,1}\n/g,"<br>"),c=FS._htmlDecodeDiv.innerText.replace(/\r\n/g,"\n").replace(/\x0F/g,"Â ").replace(/\x0E/g,"	")):(b?FS._htmlDecodeDiv.innerHTML=a.replace(/\t|\r{0,1}\n/g,"").replace(/<br\s*\/{0,1}>/gi,"\n").replace(/<span style="display\:inline\-block\;width\:3em\;"\/>/g,"	"):FS._htmlDecodeDiv.innerHTML=a.replace(/\t/g,"").replace(/<br\s*\/{0,1}>/gi,"\n"),c=FS._htmlDecodeDiv.textContent),FS._htmlDecodeDiv.innerHTML=""),c},Helpers:{convertStringtoBool:function(a){var b=!1;if(typeof a=="string"||a===!0)b=/^true$/i.test(a);return b}},locale:function(){var a=null,b=null;a=b=FS.qs.locale,a||(a=$("meta[name=allLocales]").attr("content")),b||(b=$("meta[name=locale]").attr("content")),a=a&&a.length>=2?a.split(","):["en"],b=b?b:a[0].split("-")[0],$("html").addClass("localeFull-{0}".format(a[0])),$("html").addClass("locale-{0}".format(b)),FS.locale=a,FS._simpleLocale=b},simpleLocale:function(){return FS._simpleLocale?FS._simpleLocale:typeof FS.locale=="string"?FS.locale:FS.locale[0].split("-")[0]},Browser:{getMakeAndVersion:function(){return $.browser.mozilla?"mz":$.browser.webkit?"wk":$.browser.msie?"ie"+$.browser.version.substring(0,$.browser.version.indexOf(".")):$.browser.opera?"op":""}},Controls:{init:function(a,b){var c=[],d={};$("*[data-control]",a).each(function(){var b=$(this).attr("data-control"),e=$(this).attr("data-config"),f={};d[b]=!0;if(e)try{f=$.parseJSON(e)}catch(g){console.error("Unable to parse data-config object: "+e);return}c.push($.extend({control:b,container:this},f)),$(this).removeAttr("data-control").attr("data-control-init",b)});if(c.length>0){var e=[];$.each(d,function(a){e.push(a)}),require.ensure(e,function(d){var e=[];for(var f=0;f<c.length;++f)try{var g=c[f].control.charAt(0).toLowerCase()+c[f].control.substr(1);$(c[f].container).addClass(g);var h=d(c[f].control)(c[f]);e.push(h)}catch(i){console.error("Unable to create instance of the '"+c[f].control+"' control: "+i)}b&&b(e);var j=jQuery.Event("ControlsReady");jQuery(a).trigger(j)})}}},Cookie:{setCookie:function(a,b,c,d,e){var f=d||null,g=c||null,e=e||null,h=a,i=h+"="+escape(b);g&&(i+=";path="+g),e&&(i+=";domain="+e),f&&(typeof f!="string"&&(f=f.toUTCString()),i+=";expires="+f),document.cookie=i},unsetCookie:function(a,b,c){FS.Cookie.setCookie(a,null,b,"Thu, 01-Jan-70 00:00:01 GMT",c)},getCookie:function(a){var b=document.cookie,c=a+"=",d=b.indexOf("; "+c);if(d==-1){d=b.indexOf(c);if(d!==0)return null}else d+=2;var e=document.cookie.indexOf(";",d);return e==-1&&(e=b.length),unescape(b.substring(d+c.length,e))}},File:{downloadHistory:{},loadCSS:function(a){function b(a){function b(a){var b=$(document.createElement("style"));b.attr("rel","stylesheet"),b.attr("type","text/css"),b.attr("class","useme"),b.data("importCount",1),$("head").append(b),(b[0].sheet||b[0].styleSheet).addImport(a)}function c(a){var c=$("style.useme").eq(0);if(c.length>0){var d=c.data("importCount")+1;(c[0].sheet||c[0].styleSheet).addImport(a),d>=30?c.removeAttr("class"):c.data("importCount",d)}else b(a)}c(a,1)}$("body").hasClass("env-production")&&(a=window.manifest.css[a]),a.indexOf("http")!==0&&(a.charAt(0)!=="/"&&(a="/"+a),a.indexOf("/css")!==0&&(a="/css"+a));if(FS.File.downloadHistory[a])return FS.File.downloadHistory[a]++,!0;FS.File.downloadHistory[a]=1;if($.browser.msie&&parseInt($.browser.version)<10)b(a);else{var c=document.createElement("link");c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",a),document.getElementsByTagName("head")[0].appendChild(c)}return!1},css:function(a){var b="";return $("body").hasClass("env-production")?b=window.manifest.css[a]:b="/css/"+a,b},img:function(a){var b="";return $("body").hasClass("env-production")?b=window.manifest.img[a]:b="/img/"+a,b}},LOG:{logger:function(a){var b,c={};if(typeof a!="string")throw new Error("A prefix must be passed as a parameter to create a logger.");a+=": ";for(b in console)(function(b){c[b]=function(){return arguments[0]=a+arguments[0],console[b].apply(console,arguments),arguments[0]}})(b);return c}}}),FS.qs=FS.URL.parseParams(window.location.search),FS.locale(),typeof FS=="undefined"&&(FS={}),FS.localStorage={},FS.sessionStorage={};var SUPPORTED=typeof Storage!="undefined",PREFIX="FS";FS.localStorage.set=function(a,b){if(!SUPPORTED)return;return addToStorage("localStorage",a,b)},FS.localStorage.get=function(a){if(!SUPPORTED)return;return getFromStorage("localStorage",a)},FS.localStorage.remove=function(a){if(!SUPPORTED)return;return removeFromStorage("localStorage",a)},FS.localStorage.clear=function(){if(!SUPPORTED)return;localStorage.clear()},FS.sessionStorage.set=function(a,b){if(!SUPPORTED)return;return addToStorage("sessionStorage",a,b)},FS.sessionStorage.get=function(a){if(!SUPPORTED)return;return getFromStorage("sessionStorage",a)},FS.sessionStorage.remove=function(a){if(!SUPPORTED)return;return removeFromStorage("sessionStorage",a)},FS.sessionStorage.clear=function(){if(!SUPPORTED)return;sessionStorage.clear()},function(a,b){function n(a,b){if(typeof a!="string"||!a.length)return;if(a.indexOf("u=")===-1)return{};var c=a.match(/u=[^,]+/)[0].replace("u=",""),d=a.split("&"),e={userId:c},f=e.apps={},g=function(a,b){if(!b)return;var c=a.features={},d=a.values,e=a.dirtyFeatures=[],f=Object.keys(b);f.map(function(a,e){var f=d[e]==="1",g=!!b[a];c[a]=f})};return d.map(function(a){var c;try{var d=a.match(/a=[^,]+/)[0].replace("a=","");c=f[d]={};if(d!=="shared-ui"&&d!==h){f[d]=a;return}return c.stamp=a.match(/s=[^,]+/)[0].replace("s=",""),c.values=a.match(/v=[^,]+/)[0].replace("v=",""),g(c,(b[d]||{}).features),delete c.values,c.bucket=a.match(/b=[^,]+/)[0].replace("b=",""),c}catch(e){console.error("Old Experiment is bad")}}),e}function o(a,b){function f(a,b){if(typeof a=="string")return a;var c=["a="+(b?b:"")],d=a.features||{},e=Object.keys(d);c.push("s="+a.stamp);var f="";for(var g=0;g<e.length;g++)f+=d[e[g]]?"1":"0";return c.push("v="+f),c.push("b="+a.bucket),c}var c=[],d=a.apps||{},e=Object.keys(d);if(a.apps)for(var g=0;g<e.length;g++)c.push(f(d[e[g]],e[g]));else c.push(f(a));return"u="+b+","+c.join("&")}function p(){var a=FS.Cookie.getCookie(i)||"",b=FS.Cookie.getCookie(j)||"",d={},e={};if(!a&&!b)return{};!l&&window.manifest&&(l=window.manifest.experiments);try{k=n(a,l.apps)}catch(f){k={apps:{}}}return k.apps[h]=k.apps[h]||e||{features:{}},k.apps[c]=k.apps[c]||{features:{}},k.apps}function q(a,b){var c=k,d=new Date((new Date).getTime()+m),e;e=o(c,c.userId),FS.Cookie.setCookie(i,e,"/",d)}function r(){FS.Cookie.unsetCookie(i,"/"),FS.Cookie.unsetCookie(j,"/")}function s(a){var b=[];if(a)for(var c in a.features){if(!a.features[c])continue;if(typeof a.features[c]=="boolean"||typeof a.features[c]=="number")b.push("ex_"+c);else for(var d in a.features[c])if(a.features[c][d]){b.push("ex_"+c+" ex_"+c+"_"+d);break}}return b}function t(b,c,d){function e(c,d){a("<div><label style='cursor:pointer;font-size:12px;'><input type='checkbox' value='{0}' {1} /> &nbsp;{0}</label></div>".format(c,d)).appendTo(b)}var f={down:"&#x25BC;",left:"&#x25C0;"},g,h,i,j=[],k;k=a('<h5 style="cursor:pointer;">{0} <span style="font-size: 10px;">{1}</span></h5>'.format(d,f.down)),k.appendTo(b).on("click",v);for(h in c.features)if(c.features.hasOwnProperty(h)){i=c.features[h];if(typeof i=="boolean"||typeof i=="number")e(h,i?"checked":"");else for(var l in i)i.hasOwnProperty(l)&&e(h+"#"+l,i[l]?"checked":"")}d==="Shared-ui"&&k.click()}function v(){var b=a(this),c=u.left;b.siblings().toggle(),b.siblings().eq(0).is(":visible")&&(c=u.down),b.find("span").html(c)}var c="shared-ui",d=window.location.hostname.toLowerCase(),e={},f={},g=null,h=window.appName||"none",i="fs_experiments",j="fs_ex_"+h,k={apps:{}},l,m=31536e6;a.extend(typeof FS=="object"?FS:window.FS={},{initEx:function(b){p();var d=[];f=k.apps[h]||(k.apps[h]={}),e=k.apps[c]||(k.apps[c]={}),d=d.concat(s(f)),d=d.concat(s(e)),a("html").addClass(d.join(" "));var g=a.Event("ExReady");a(window).trigger(g)},defaultEx:function(a){l=a},activeList:function(){var a=[],b;for(b in f.features)FS.showEx(b)&&a.push(b);for(b in e.features)FS.showEx(b)&&a.push(b);return a},setEx:function(a,b){b=b?1:0;var d=k.apps,g=d[h].features||(d[h].features={}),i=d[c].features||(d[c].features={}),j=a.split("#");j.length===2&&(i[j[0]]!==undefined?i=i[j[0]]=i[j[0]]||{}:g=g[j[0]]=g[j[0]]||{},a=j[1]),i[a]!==undefined?(i[a]=b,e.dirtyFeatures&&e.dirtyFeatures.join(" ").indexOf(j[0])===-1&&e.dirtyFeatures.push(j[0])):(g[a]=b,f.dirtyFeatures&&f.dirtyFeatures.join(" ").indexOf(j[0])===-1&&f.dirtyFeatures.push(j[0])),q()},listEx:function(){g=a("<div><header style='overflow: auto;'><h4 style='padding:0;margin:0;cursor:pointer;'>Experiments <span style=\"font-size: 10px;\">&#x25BC;</span></h4></header></div>").css({"z-index":19989,position:"absolute",top:"0px",left:"5px",border:"1px solid #000000","background-color":"#F0F2DD","max-height":"95%",overflow:"scroll",padding:"8px",width:"300px"}).appendTo("body")[0];var b=a("header",g);a(b).on("click","h4",v.bind(a(b))),a("<a href='javascript:$.noop()' style='float:right;'>Reset</a>").click(function(a){r(),window.location.reload()}).prependTo(b),a("<a href='javascript:$.noop()' style='float:right; padding-left: 5px;'> | Close</a>").click(function(b){a(g).remove()}).prependTo(b);var c,d=a("<div></div>").appendTo(g);f&&(c=a("<div></div>").appendTo(d),t(c,f,"'{0}' app".format(h))),e&&(c=a("<div></div>").appendTo(d),t(c,e,"Shared-ui")),a(d).on("change","input",function(a){FS.setEx(a.currentTarget.value,!FS.showEx(a.currentTarget.value))})},showEx:function(a){if(a===null||a.length===0)return!0;var b=f.features||(f.features={}),c=e.features||(e.features={}),d=a.split("#"),g=!1,h=!1;return d.length===2&&(c[d[0]]!==undefined?c=c[d[0]]=c[d[0]]||{}:b=b[d[0]]=b[d[0]]||{},a=d[1]),g=b[a]?!0:!1,h=c[a]?!0:!1,g?g:h}});var u={down:"&#x25BC;",left:"&#x25C0;"};a(function(){var a=typeof b=="object"?b:{};FS.initEx(a),FS.qs.listEx&&g===null&&FS.listEx()})}(window.jQuery,window.experiments),function(a){function c(b){var c={};if(b){b=a.trim(b)||"";if(b.length>0){var d=b.split("\n");for(var e=0;e<d.length;++e){var f=d[e].split(":");if(f.length>=2){var g=a.trim(f[0]);f.splice(0,1);var h=a.trim(f.join(":"));c[g]=h}}}}return c}var b={type:"GET",dataType:"json",contentType:undefined,url:null,data:{},cb:null,passthrough:null,params:null,bypassQueue:!1,tz:(new Date).getTimezoneOffset(),retry:0};a.extend(typeof FS=="object"?FS:window.FS={},{req:{evalJSON:function(b){b=b||"{}";var c={};try{c=a.parseJSON(b)}catch(d){c={error:"Unable to parse string as JSON: "+d,originalString:b}}return c},get:function(a,b,c,d,e){return FS.req.call({type:"GET",passthrough:d,url:a,params:c,cb:b},e)},del:function(a,b,c,d,e,f){return FS.req.call({type:"DELETE",passthrough:e,url:a,params:c,data:typeof d=="object"?JSON.stringify(d):d,cb:b,contentType:typeof d=="object"?"application/json":undefined},f)},post:function(a,b,c,d,e,f){return FS.req.call({type:"POST",passthrough:e,url:a,params:c,data:typeof d=="object"?JSON.stringify(d):d,cb:b,contentType:typeof d=="object"?"application/json":undefined},f)},put:function(a,b,c,d,e,f){return FS.req.call({type:"PUT",passthrough:e,url:a,params:c,data:typeof d=="object"?JSON.stringify(d):d,cb:b,contentType:typeof d=="object"?"application/json":undefined},f)},call:function(d,e){d=a.extend({},b,d,e);var f=d.url||"",g=FS.activeList();g&&g.length>0&&(d.headers=d.headers||{},d.headers["X-FS-Feature-Tag"]=g.join(","));if(f.length==0)throw new Error("URL must be defined to make an AJAX call.");d.passthrough=d.passthrough||{},f=FS.URL.appendParams(f,d.params);var h=function(b,d){var e,f,g=arguments.callee.config||{},h=arguments.callee.ajaxParams||null;g.dataType=="json"?(e=FS.req.evalJSON(b.responseText),b.status===204&&(e.status="OK")):e=b.responseText,f={status:b.status,statusText:b.statusText,data:e,requestParams:g.params,requestData:g.data,passthrough:g.passthrough,headers:c(b.getAllResponseHeaders())},h&&g.retry>0&&f.data.status!=="OK"&&f.data.status!=="SESSION_EXPIRED"&&f.data.status!=="UNAUTHENTICATED"?(console.warn("Auto retry a failed request to: "+h.url),g.retry--,a.ajax(h)):g.cb&&g.cb(f)};h.config=d;var i={type:d.type,url:f,dataType:d.dataType,complete:h,data:d.data,contentType:d.contentType,headers:d.headers};return h.ajaxParams=i,a.ajax(i)}}})}(jQuery);var consoleMethods=["log","debug","info","warn","error","assert","dir","dirxml","trace","group","groupEnd","time","timeEnd","profile","profileEnd","count"],theConsole=window.console=window.console||{};for(var i=0,l=consoleMethods.length;i<l;i++){var method=consoleMethods[i];typeof theConsole[method]=="undefined"&&(theConsole[method]=theConsole.log||function(){})}typeof FS=="undefined"&&(FS={}),FS.metric={},FS.metric.logHttpRequest=function(a){if(typeof a!="object")return;try{var b="measureClient#"+parseOptions(a);return sendBeacon(b),b}catch(c){}},FS.metric.count=function(a,b,c){try{var d=b||1,e="count#"+a+"="+d;return c&&(e+=" "+parseOptions(c)),sendBeacon(e),e}catch(f){}},function(){function a(b,c,d){var e=a.resolve(b);if(null==e){d=d||b,c=c||"root";var f=new Error('Failed to require "'+d+'" from "'+c+'"');throw f.path=d,f.parent=c,f.require=!0,f}var g=a.modules[e];return g.exports||(g.exports={},g.client=g.component=!0,g.call(this,g.exports,a.relative(e),g)),g.exports}a.modules={},a.aliases={},a.resolve=function(b){b.charAt(0)==="/"&&(b=b.slice(1));var c=[b,b+".js",b+".json",b+"/index.js",b+"/index.json"];for(var d=0;d<c.length;d++){var b=c[d];if(a.modules.hasOwnProperty(b))return b;if(a.aliases.hasOwnProperty(b))return a.aliases[b]}},a.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;d<b.length;++d)".."==b[d]?a.pop():"."!=b[d]&&""!=b[d]&&c.push(b[d]);return a.concat(c).join("/")},a.register=function(b,c){a.modules[b]=c},a.alias=function(b,c){if(!a.modules.hasOwnProperty(b))throw new Error('Failed to alias "'+b+'", it does not exist');a.aliases[c]=b},a.relative=function(b){function d(a,b){var c=a.length;while(c--)if(a[c]===b)return c;return-1}function e(c){var d=e.resolve(c);return a(d,b,c)}var c=a.normalize(b,"..");return e.resolve=function(e){var f=e.charAt(0);if("/"==f)return e.slice(1);if("."==f)return a.normalize(c,e);var g=b.split("/"),h=d(g,"deps")+1;return h||(h=0),e=g.slice(0,h+1).join("/")+"/deps/"+e,e},e.exists=function(b){return a.modules.hasOwnProperty(e.resolve(b))},e},a.register("RedVentures-reduce/index.js",function(a,b,c){c.exports=function(a,b,c){var d=0,e=a.length,f=arguments.length==3?c:a[d++];while(d<e)f=b.call(null,f,a[d],++d,a);return f}}),a.register("visionmedia-superagent/lib/client.js",function(a,b,c){function g(){}function h(a){var b={}.toString.call(a);switch(b){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function i(){if(f.XMLHttpRequest&&("file:"!=f.location.protocol||!f.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}return!1}function k(a){return a===Object(a)}function l(a){if(!k(a))return a;var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}function m(a){var b={},c=a.split("&"),d,e;for(var f=0,g=c.length;f<g;++f)e=c[f],d=e.split("="),b[decodeURIComponent(d[0])]=decodeURIComponent(d[1]);return b}function n(a){var b=a.split(/\r?\n/),c={},d,e,f,g;b.pop();for(var h=0,i=b.length;h<i;++h)e=b[h],d=e.indexOf(":"),f=e.slice(0,d).toLowerCase(),g=j(e.slice(d+1)),c[f]=g;return c}function o(a){return a.split(/ *; */).shift()}function p(a){return e(a.split(/ *; */),function(a,b){var c=b.split(/ *= */),d=c.shift(),e=c.shift();return d&&e&&(a[d]=e),a},{})}function q(a,b){b=b||{},this.req=a,this.xhr=this.req.xhr,this.text=this.xhr.responseText,this.setStatusProperties(this.xhr.status),this.header=this.headers=n(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body=this.parseBody(this.text)}function r(a,b){var c=this;d.call(this),this._query=this._query||[],this.method=a,this.url=b,this.header={},this._header={},this.on("end",function(){var b=new q(c);"HEAD"==a&&(b.text=null),c.callback(null,b)})}function s(a,b){return"function"==typeof b?(new r("GET",a)).end(b):1==arguments.length?new r("GET",a):new r(a,b)}var d=b("emitter"),e=b("reduce"),f="undefined"==typeof window?this:window,j="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};s.serializeObject=l,s.parseString=m,s.types={html:"text/html",json:"application/json",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},s.serialize={"application/x-www-form-urlencoded":l,"application/json":JSON.stringify},s.parse={"application/x-www-form-urlencoded":m,"application/json":JSON.parse},q.prototype.get=function(a){return this.header[a.toLowerCase()]},q.prototype.setHeaderProperties=function(a){var b=this.header["content-type"]||"";this.type=o(b);var c=p(b);for(var d in c)this[d]=c[d]},q.prototype.parseBody=function(a){var b=s.parse[this.type];return b?b(a):null},q.prototype.setStatusProperties=function(a){var b=a/100|0;this.status=a,this.statusType=b,this.info=1==b,this.ok=2==b,this.clientError=4==b,this.serverError=5==b,this.error=4==b||5==b?this.toError():!1,this.accepted=202==a,this.noContent=204==a||1223==a,this.badRequest=400==a,this.unauthorized=401==a,this.notAcceptable=406==a,this.notFound=404==a,this.forbidden=403==a},q.prototype.toError=function(){var a=this.req,b=a.method,c=a.path,d="cannot "+b+" "+c+" ("+this.status+")",e=new Error(d);return e.status=this.status,e.method=b,e.path=c,e},s.Response=q,d(r.prototype),r.prototype.timeout=function(a){return this._timeout=a,this},r.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},r.prototype.abort=function(){if(this.aborted)return;return this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this},r.prototype.set=function(a,b){if(k(a)){for(var c in a)this.set(c,a[c]);return this}return this._header[a.toLowerCase()]=b,this.header[a]=b,this},r.prototype.getHeader=function(a){return this._header[a.toLowerCase()]},r.prototype.type=function(a){return this.set("Content-Type",s.types[a]||a),this},r.prototype.auth=function(a,b){var c=btoa(a+":"+b);return this.set("Authorization","Basic "+c),this},r.prototype.query=function(a){return"string"!=typeof a&&(a=l(a)),a&&this._query.push(a),this},r.prototype.send=function(a){var b=k(a),c=this.getHeader("Content-Type");if(b&&k(this._data))for(var d in a)this._data[d]=a[d];else"string"==typeof a?(c||this.type("form"),c=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==c?this._data=this._data?this._data+"&"+a:a:this._data=(this._data||"")+a):this._data=a;return b?(c||this.type("json"),this):this},r.prototype.callback=function(a,b){var c=this._callback;if(2==c.length)return c(a,b);if(a)return this.emit("error",a);c(b)},r.prototype.crossDomainError=function(){var a=new Error("Origin is not allowed by Access-Control-Allow-Origin");a.crossDomain=!0,this.callback(a)},r.prototype.timeoutError=function(){var a=this._timeout,b=new Error("timeout of "+a+"ms exceeded");b.timeout=a,this.callback(b)},r.prototype.withCredentials=function(){return this._withCredentials=!0,this},r.prototype.end=function(a){var b=this,c=this.xhr=i(),d=this._query.join("&"),e=this._timeout,f=this._data;this._callback=a||g,this._withCredentials&&(c.withCredentials=!0),c.onreadystatechange=function(){if(4!=c.readyState)return;if(0==c.status)return b.aborted?b.timeoutError():b.crossDomainError();b.emit("end")},c.upload&&(c.upload.onprogress=function(a){a.percent=a.loaded/a.total*100,b.emit("progress",a)}),e&&!this._timer&&(this._timer=setTimeout(function(){b.abort()},e)),d&&(d=s.serializeObject(d),this.url+=~this.url.indexOf("?")?"&"+d:"?"+d),c.open(this.method,this.url,!0);if("GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof f&&!h(f)){var j=s.serialize[this.getHeader("Content-Type")];j&&(f=j(f))}for(var k in this.header){if(null==this.header[k])continue;c.setRequestHeader(k,this.header[k])}return c.send(f),this},s.Request=r,s.get=function(a,b,c){var d=s("GET",a);return"function"==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},s.head=function(a,b,c){var d=s("HEAD",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.del=function(a,b){var c=s("DELETE",a);return b&&c.end(b),c},s.patch=function(a,b,c){var d=s("PATCH",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.post=function(a,b,c){var d=s("POST",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},s.put=function(a,b,c){var d=s("PUT",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},c.exports=s}),a.register("component-indexof/index.js",function(a,b,c){c.exports=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}}),a.register("component-emitter/index.js",function(a,b,c){function e(a){if(a)return f(a)}function f(a){for(var b in e.prototype)a[b]=e.prototype[b];return a}var d=b("indexof");c.exports=e,e.prototype.on=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},e.prototype.once=function(a,b){function d(){c.off(a,d),b.apply(this,arguments)}var c=this;return this._callbacks=this._callbacks||{},b._off=d,this.on(a,d),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=function(a,b){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;var e=d(c,b._off||b);return~e&&c.splice(e,1),this},e.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},e.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},e.prototype.hasListeners=function(a){return!!this.listeners(a).length}}),a.register("CamShaft-require-component/index.js",function(a,b,c){c.exports=function(a){function b(b,c){try{return a(b)}catch(d){try{return a(c||b+"-component")}catch(e){throw d}}}for(var c in a)b[c]=a[c];return b}}),a.register("superagent-defaults/index.js",function(a,b,c){function g(){if(!(this instanceof g))return new g;this.headers=[]}function h(a,b){for(var c=0;c<a.length;++c)b(a[c],c)}b=b("require-component")(b);var d=b("superagent"),e=b("emitter"),f=b("methods","./methods");c.exports=g,e(g.prototype),g.prototype.set=function(){return this.headers.push(arguments),this},g.prototype.applyHeaders=function(a){h(this.headers,function(b){a.set.apply(a,b)})},h(f,function(a){var b="delete"==a?"del":a;a=a.toUpperCase(),g.prototype[b]=function(b,c){var e=d(a,b);return this.applyHeaders(e),this.emit("request",e),c&&e.end(c),e}})}),a.register("superagent-defaults/methods.js",function(a,b,c){c.exports=["get","post","put","head","delete","options","trace","patch"]}),a.alias("visionmedia-superagent/lib/client.js","superagent-defaults/deps/superagent/lib/client.js"),a.alias("visionmedia-superagent/lib/client.js","superagent-defaults/deps/superagent/index.js"),a.alias("visionmedia-superagent/lib/client.js","superagent/index.js"),a.alias("component-emitter/index.js","visionmedia-superagent/deps/emitter/index.js"),a.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js"),a.alias("RedVentures-reduce/index.js","visionmedia-superagent/deps/reduce/index.js"),a.alias("visionmedia-superagent/lib/client.js","visionmedia-superagent/index.js"),a.alias("component-emitter/index.js","superagent-defaults/deps/emitter/index.js"),a.alias("component-emitter/index.js","emitter/index.js"),a.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js"),a.alias("CamShaft-require-component/index.js","superagent-defaults/deps/require-component/index.js"),a.alias("CamShaft-require-component/index.js","require-component/index.js"),window["superagent-defaults"]=a("superagent-defaults")}(),typeof window.FS=="undefined"&&(window.FS={}),function(a,b){"use strict";var c=a.superagent=b();c.on("request",function(b){var c=a.Cookie.getCookie("fssessionid");b.set("accept","application/json"),b.timeout(2e4),b.setSessionId=function(a){var d={};return d[a]=c,b.query(d),b},b.handleErrors=function(){return b.on("error",function(b){!b.timeout}),b},b.on("response",function(a){})})}(window.FS,window["superagent-defaults"])